---
import PostListLayout from "../../layouts/PostListLayout.astro";
import { getCollection, type CollectionEntry } from "astro:content";

const allPosts = await getCollection("blog");
const sortedPosts = allPosts.sort(
  (a: CollectionEntry<"blog">, b: CollectionEntry<"blog">) =>
    b.data.date.valueOf() - a.data.date.valueOf(),
);
const allCategories = [
  ...new Set(
    allPosts.flatMap((post: CollectionEntry<"blog">) => post.data.categories),
  ),
];
---

<PostListLayout
  title="Məqalələr"
  currentPath="/blogs"
  windowTitle="blogs"
  searchPlaceholder="məqalə_axtar..."
  contributeLabel="yeni_blog_əlavə_et()"
  posts={sortedPosts}
  categories={allCategories}
/>
